<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8">
<title>Tabellone Torneo</title>
<style>
body {
    font-family: Arial, sans-serif;
    margin:0;
    padding:20px;
    background:#f0f8ff;
}
h1 { text-align:center; color:#2a7ae2; margin-bottom:30px; }
#tabellone {
    position: relative;
    width: 2000px;
    height: 1600px;
    border: 2px solid #333;
    margin: 0 auto;
    background:#fff;
}
.partita {
    position: absolute;
    width: 245px;
    height: 80px;
    border: 2px solid #333;
    border-radius: 8px;
    background: #f0f0f0;
    padding: 10px;
    box-sizing: border-box;
    pointer-events: none;
}
.partita .nomi {
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    font-size: 14px;
}
.partita .sets {
    display: flex;
    flex-direction: column;
    gap: 4px;
    font-size: 12px;
}
.lineaZ {
    position: absolute;
    pointer-events: none;
}
.vincitore {
    position: absolute;
    padding: 0.5px 10px;
    border: 2px solid green;
    border-radius: 2px;
    background: #d0ffd0;
    font-weight: bold;
    pointer-events: none;
}
</style>
</head>
<body>

<h1>Tabellone Torneo</h1>
<div id="tabellone"></div>

<script>
const urlJSON = 'tabellone.json';

fetch(urlJSON)
  .then(res => {
    if (!res.ok) throw new Error('Impossibile caricare il JSON: ' + res.status);
    return res.json();
  })
  .then(data => {
    const container = document.getElementById('tabellone');

    data.forEach(turno => {
        // Partite
        turno.posizioni.forEach(p => {
            const box = document.createElement('div');
            box.className = 'partita';
            box.style.left = p.left + 'px';
            box.style.top = p.top + 'px';
            box.innerHTML = `
                <div class="nomi">
                    <div>${p.giocatoreA || "?"}</div>
                    <div>${p.giocatoreB || "?"}</div>
                </div>
                <div class="sets">
                    <div>${p.sets[0].join('-')}</div>
                    <div>${p.sets[1].join('-')}</div>
                </div>
            `;
            container.appendChild(box);
        });

        // Linee Z
        turno.lineeZ.forEach(z => {
            const linea = document.createElement('div');
            linea.className = 'lineaZ';
            linea.style.left = z.left + 'px';
            linea.style.top = z.top + 'px';
            linea.innerHTML = `
                <div style="position:absolute; left:0; top:0; width:${z.oriz1}px; height:2px; background:black;"></div>
                <div style="position:absolute; left:${z.oriz1-2}px; top:0; width:2px; height:${Math.abs(z.vert)}px; background:black;"></div>
                <div style="position:absolute; left:${z.oriz1-2}px; top:${Math.abs(z.vert)-2}px; width:${z.oriz2}px; height:2px; background:black;"></div>
            `;
            container.appendChild(linea);
        });

        // Vincitori
        turno.vincitori.forEach(v => {
            const vinc = document.createElement('div');
            vinc.className = 'vincitore';
            vinc.style.left = v.left + 'px';
            vinc.style.top = v.top + 'px';
            vinc.textContent = v.nome;
            container.appendChild(vinc);
        });
    });
  })
  .catch(err => {
    console.error(err);
    alert('Errore nel caricamento del tabellone: ' + err.message);
  });
</script>

</body>
</html>
